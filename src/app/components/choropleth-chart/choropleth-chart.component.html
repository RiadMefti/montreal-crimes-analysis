
<div class="viz-container">
  
  <div id="additionnals">
    <mat-card id="filtersCategory" className="right">
      <div class="zero">
          <section class="example-section">
            <span class="example-list-section">
              <mat-checkbox [checked]="allComplete" [indeterminate]="someComplete()"
                (change)="setAll($event.checked)">
                Toutes les catégories
              </mat-checkbox>
            </span>
            <span class="example-list-section">
              <ul>
                @for (type of filterCategories; track type) {
                <li>
                  <mat-checkbox  class="example-margin" [(ngModel)]="type.selected" (ngModelChange)="updateFiltersCategories()">
                    {{type.name}}
                  </mat-checkbox>
                </li>
                }
              </ul>
            </span>
  
        </section>
      </div>
    </mat-card>
    
  <mat-card class="two">
    <div id="categoryFilter">
      <mat-form-field>
        <mat-label>Category</mat-label>
        <mat-select (selectionChange)="onTableSelectionChange($event.value)" [compareWith]="compareObjects" [(ngModel)]="selectedTableCategory">
          @for (category of tableCategories; track category) {
          <mat-option [value]="category">{{category.name}}</mat-option>
          }
        </mat-select>
      </mat-form-field>
      <h3>{{partOfMontrealChosen}}</h3>
    </div>

    <div class="two-child">
      <table mat-table [dataSource]="dataSource" class="info-tab">
        <ng-container [matColumnDef]="column" *ngFor="let column of columnsToDisplay">
          <th mat-header-cell *matHeaderCellDef>{{ column }}</th>
          <td mat-cell *matCellDef="let ageGroup">{{ ageGroup[column] }}</td>
        </ng-container>

        <tr mat-row *matRowDef="let myRowData; columns: columnsToDisplay"></tr>
      </table>
    </div>
  </mat-card>
  </div>

  <mat-card>
    <mat-card-title>
      <h3 class="chart-title">
        Nombre de crimes moyen par année à Montréal selon le quartier
      </h3>
    </mat-card-title>
    <div class="graph" id="map">
      <div class="one" >
        <div id="choropleth-legend"></div>
        <svg class="main-svg"></svg>
      </div>
    </div>
    <mat-card-actions>
      <button id="resetFiltersButton" (click)="resetFilters($event)" mat-raised-button> Réinitialiser les filtres</button>
    </mat-card-actions>
  </mat-card>
</div>
